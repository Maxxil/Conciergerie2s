<!--
  Generated template for the DevisDetailPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>devis-detail</ion-title>
  </ion-navbar>

</ion-header>

<ion-content padding>
  <ion-list>
    <ion-list-header>      
        <h1>{{commande.prestation.nom}}</h1>
        Demandé le : <em>{{commande.dateCreation | date: 'dd/MM/yy HH:mm'}}</em><br>
        Statut : <em>{{ status }}</em>        
    </ion-list-header>
    <hr>
    <ion-item>
        <p> <span  class="label-title">Date RDV: </span><em >{{commande.date | date: 'dd/MM/yy'}}</em></p><br>
        <p>
          <span class="label-title">Client :</span><br>
          <span text-wrap > Nom: {{commande.client.nom }} Prénom: {{commande.client.prenom}}</span><br>
          <span text-wrap>  Tel: {{commande.client.telephoneMobile}}</span><br>
          <span text-wrap>Ville: {{commande.client.ville}}</span>
        </p><br>
        <p text-wrap> <span  class="label-title">Informations fournies par le client : </span><br>{{commande.information}}</p>
    </ion-item>

    <ion-item  *ngIf="peutPostuler() && dejapostuler">
        <h1>  Ma proposition </h1><br>
        <p>
            <span class="label-title">Date proposée </span> : <em >{{proposition.dateProposee | date: 'dd/MM/yy'}}</em></p><br>
            
        <p><span class="label-title">Prix proposé TTC </span> : <em >{{proposition.prix }}</em> €</p>
        
    </ion-item>
  </ion-list>
  <ion-list  *ngIf="peutPostuler() && !dejapostuler">  
    <br>
      <ion-list-header>      
          <h1> Je postule  </h1>
      </ion-list-header> 
    
      <ion-item >      
        <span item-start>Date proposée : </span><ion-datetime displayFormat="DD/MM/YYYY" placeholder="jj/mm/aaaa" pickerFormat="DD MMMM YYYY"  max='2030-12-31' [(ngModel)]="proposition.dateProposee"></ion-datetime>
      </ion-item>
      
      <ion-item>        
          <span item-start>Prix proposé TTC : </span><ion-input type="number" [(ngModel)]="proposition.prix" placeholder="votre prix"></ion-input>
      </ion-item>   
  </ion-list>

  <ion-list  *ngIf="apayer()">              
        <ion-item >      
           Date proposée : 
        </ion-item>
        
        <ion-item>        
            Prix proposé TTC : 
        </ion-item>   
    </ion-list>
  <div text-center>
      <button *ngIf="peutPostuler() && !dejapostuler" ion-button (click)="postuler()" [disabled]="!(proposition.dateProposee && proposition.prix)" taupe>Postuler</button>
      <button *ngIf="apayer()" ion-button (click)="commander()"  taupe>Payer en ligne</button>
      <button *ngIf="apayer()" ion-button (click)="commanderParCheque()"  taupe>Payer par cheque</button>
      <button ion-button (click)="annuler()" taupe>Fermer</button>
    </div>
</ion-content>
