<!--
  Generated template for the CommandeHoraireDetailPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Detail devis</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
 
  <ion-list>
    <ion-item>
        <ion-avatar item-start>
            <img src="{{prestationImageUrl + commande.prestation.image}}">
          </ion-avatar>
      <h2 text-wrap>{{commande.prestation.nom}}</h2>
      </ion-item>
<hr>
      <ion-item>
      <p> <span  class="label-title">Date: </span><em >{{commande.date | date: 'dd/MM/yy'}}</em></p><br>
      <p>
        <span class="label-title">Client :</span><br>
        <span text-wrap > Nom: {{commande.client.nom }} Prénom: {{commande.client.prenom}}</span><br>
        <span text-wrap>  Tel: {{commande.client.telephoneMobile}}</span><br>
        <span text-wrap>Ville: {{commande.client.ville}}</span>
      </p><br>
      <p text-wrap> <span  class="label-title">Informations fournies par le client : </span><br>{{commande.information}}</p>
    </ion-item>
  </ion-list>
  <hr>
  <div  *ngIf="!isEnCours()"  text-center>      
      <button ion-button color="secondary">Prestataire choisi</button><br><br>             
      <h2 *ngIf="prestataireChoisiExist()"> {{ prestataireChoisi.utilisateur.nom + " " + prestataireChoisi.utilisateur.prenom}}</h2>
      <h2 *ngIf="!prestataireChoisiExist()"> Conciergerie Second Souffle</h2>       
    </div>

    
    <div  *ngIf="isEnCours()"  text-center>
        <button ion-button color="primary"  (click)="validerCommande()" >JE VEUX REALISER AVEC C2S</button>      
    <br><span style="font-size:2em;">OU</span>
    <ion-list radio-group [(ngModel)]="commande.prestataireChoisi">
        <ion-list-header>Envoyer l'un des prestataires suivant   <ion-badge item-end>{{commande.propositions.length}}</ion-badge></ion-list-header> 
      <hr>
      <ion-item *ngFor="let proposition of commande.propositions">
        <ion-label text-wrap text-xs>Nom: {{proposition.prestataire.utilisateur.nom + " " + proposition.prestataire.utilisateur.prenom}}
          <br>Date proposée : {{proposition.dateProposee | date: 'dd/MM/yy'}}<br>Prix proposé : {{proposition.prix}} €
        </ion-label><br>
        <ion-radio [value]="prestataire" (click)="validerCommande()"></ion-radio>
        <hr>
      </ion-item>
    </ion-list>
  </div>


</ion-content>
